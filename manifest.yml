modules:
  jira:adminPage:
    - key: sync-connector-admin
      resource: admin-ui
      resolver:
        function: resolver
      title: Sync Connector Configuration

  trigger:
    - key: issue-created
      function: sync-trigger
      events:
        - avi:jira:created:issue

    - key: issue-updated
      function: sync-trigger
      events:
        - avi:jira:updated:issue

    - key: issue-commented
      function: comment-trigger
      events:
        - avi:jira:commented:issue

  scheduledTrigger:
    - key: scheduled-sync
      interval: hour
      function: scheduled-sync-function

  function:
    - key: sync-trigger
      handler: index.run

    - key: comment-trigger
      handler: index.runComment

    - key: scheduled-sync-function
      handler: index.runScheduledSync

    - key: resolver
      handler: index.handler

resources:
  - key: admin-ui
    path: static/admin-page/build

app:
  id: ari:cloud:ecosystem::app/362d8e6b-b68c-4403-8020-d32ddcc02716
  runtime:
    name: nodejs20.x

permissions:
  scopes:
    - storage:app
    - read:jira-work
    - write:jira-work
    - read:jira-user
  external:
    fetch:
      backend:
        - '*.atlassian.net'